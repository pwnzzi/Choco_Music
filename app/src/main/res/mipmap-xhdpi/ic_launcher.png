package kr.hackaton.youth.play_music;

import android.content.Intent;
import android.media.AudioAttributes;
import android.media.SoundPool;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.View;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;

import androidx.annotation.NonNull;
import androidx.appcompat.app.AppCompatActivity;

import java.util.ArrayList;
import java.util.Arrays;

import com.bumptech.glide.Glide;
import com.bumptech.glide.load.resource.bitmap.Rotate;

import kr.hackaton.youth.R;
import kr.hackaton.youth.draw_music.DrawingMusic;

public class PlayMusicActivity extends AppCompatActivity {

    private String TAG = "PlayMusicActivity.java";
    private int NOTE_LENGTH = 16;

    //drawing Music
    DrawingMusic drawingMusic;

    private View note1;
    private View note2;
    private View note3;
    private View note4;
    private View note5;
    private View note6;
    private View note7;
    private View note8;
    private View note9;
    private View note10;
    private View note11;
    private View note12;
    private View note13;
    private View note14;
    private View note15;
    private View note16;
    private ArrayList<View> noteViewArray;



    public static int do1=1, re1=2, mi1=3, pa1=4, sol1=5, ra1=6, si1=7; // 1옥타브 도레미파 솔라시

    private int[] soundList;

    boolean mMusicFinished;

    private SoundPool soundPool;
    private Thread soundThread;
    private ImageView play_btn;

    private int do2 = 8;// 2옥타브 도레미파 솔라
    private int noSound ;

    private ImageView red_do;
    private ImageView orage_re;
    private ImageView yello_mi;
    private ImageView green_pa1;
    private  ImageView green_pa2;
    private ImageView blue1_sol1,blue2_sol1,blue3_sol1;
    private ImageView navy_ra1;
    private ImageView puple1_si1,puple2_si1;
    private ImageView red_do2;
    private ImageView nosound_no;
    private Animation gradient_scale_ani,wave_ani,rotation_ani,togather_ani,fade_in,fade_out,move_ani,fade_out_slow;



    private int soundIndex = 0;

    private int[] canon = { //캐논 변주곡 전주
        do2, noSound, noSound, noSound,sol1, noSound, noSound, noSound,
        ra1, noSound, noSound, noSound,mi1, noSound, noSound, noSound,pa1,
        noSound, noSound, noSound,do1, noSound, noSound, noSound,pa1, noSound, noSound, noSound,sol1
    };


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_play_music);

        Intent intent=getIntent();
        int position = intent.getIntExtra("id",1);

      /*  if(position==0){
            Log.d("된다!!!","된다!!!!!!!!!!");
        }else if(position==1){
            Log.d("나비야","나비야 나비야 이리나라 오너라");
        }*/

        drawingMusic = new DrawingMusic();

        note1 = findViewById(R.id.note1);
        note2 = findViewById(R.id.note2);
        note3 = findViewById(R.id.note3);
        note4 = findViewById(R.id.note4);
        note5 = findViewById(R.id.note5);
        note6 = findViewById(R.id.note6);
        note7 = findViewById(R.id.note7);
        note8 = findViewById(R.id.note8);
        note9 = findViewById(R.id.note9);
        note10 = findViewById(R.id.note10);
        note11 = findViewById(R.id.note11);
        note12 = findViewById(R.id.note12);
        note13 = findViewById(R.id.note13);
        note14 = findViewById(R.id.note14);
        note15 = findViewById(R.id.note15);
        note16 = findViewById(R.id.note16);

        noteViewArray = new ArrayList<>(Arrays.asList(note1, note2, note3, note4, note5, note6, note7,
                note8, note9, note10, note11, note12, note13, note14, note15, note16));


//        sol1,sol1,noSound,mi1,sol1,sol1,noSound,ra1,ra1,ra1,ra1,ra1,noSound,noSound,noSound,sol1,sol1,
//                sol1,sol1,pa1,pa1,pa1,pa1,mi1,mi1,mi1,mi1,mi1,noSound,noSound,noSound,mi1,sol1,sol1,sol1,mi1,sol1,sol1,noSound,ra1,ra1,mi1,mi1,sol1,noSound,noSound,noSound,
//                pa1,pa1,pa1,pa1,mi1,mi1,mi1,mi1,re1,re1,sol1,sol1,do1

        if(position==0){
            soundList = new int[]{
                    noSound,noSound,mi1,sol1,sol1,noSo